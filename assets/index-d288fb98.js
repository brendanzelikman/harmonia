import{j as e,L as fe,b as G,K as j,u as L,a as c,s as Y,i as Ne,c as xe,d as ve,r as y,T as Te,e as s,f as ye,B as we,t as Ce,g as Se,h as ke,k as Me,l as Pe,m as Be,n as Fe,o as re,p as Ae,q as Ie,v as Le,w as J,x as q,y as Ee,z as ee,A as Oe,C as $e,D as De,E as je,F as He,G as Ve,H as Re,I as Ue,J as Ke,M as Ge,N as H,O as _e,P as We,Q as ze,R as $,S as le,U as K,V as Ze,W as Qe,X as Xe,Y as Q,Z as Ye,_ as Je,$ as qe,a0 as W,a1 as et,a2 as tt,a3 as st,a4 as at,a5 as oe,a6 as ce,a7 as ie,a8 as nt,a9 as X,aa as rt,ab as lt,ac as de,ad as ot,ae as ct,af as it,ag as dt,ah as ut,ai as ht,aj as te,ak as pt,al as mt,am as gt,an as bt,ao as ft,ap as Nt,aq as xt,ar as vt,as as Tt,at as yt,au as wt,av as Ct,aw as St,ax as kt,ay as Mt,az as Pt,aA as Bt,aB as se,aC as Ft,aD as ae,aE as ne,aF as At,aG as It,aH as Lt,aI as Et,aJ as Ot,aK as $t,aL as Dt,aM as jt,aN as Ht,aO as Vt,aP as Rt,aQ as Ut,aR as Kt,aS as Gt,aT as _t,aU as Wt}from"./index-fe048463.js";import{u as ue,a as zt,r as Zt,t as Qt,b as Xt,c as Yt,d as Jt,m as qt}from"./ArrangementThunks-8e0396f3.js";import{Z}from"./menu-4bb74a08.js";function es(){return e("a",{href:"/harmonia/",className:"select-none",children:e("img",{src:fe,alt:"Logo",className:"w-10 h-10"})})}function _({className:t="",disabled:r=!1,disabledClass:n="bg-slate-400/30",children:o,onClick:a,label:m}){return e("button",{onClick:r?()=>null:a,className:`${t??""} ${r?n:""} flex items-center justify-center rounded focus:outline-none`,"aria-label":m,children:o})}const T=t=>e("div",{className:`w-full flex justify-between items-center group px-2 relative rounded ${t.className??""}`,onClick:t.onClick,children:t.children}),k=t=>e("label",{className:`text-sm text-slate-100 group-focus-within:text-shadow pointer-events-none ${t.className??""}`,onClick:t.onClick,children:t.children}),O=t=>e("input",{...t,className:`block flex-auto px-2 bg-transparent rounded-md text-sm focus:outline-none text-white disabled:text-slate-400 disabled:placeholder-slate-400 placeholder-slate-300 border border-slate-400 focus:border-slate-300 focus:ring-0 appearance-none ${t.className??""}`,onKeyDown:r=>{var n;(n=t.onKeyDown)==null||n.call(t,r),G(r)}}),he=t=>e("button",{...t,className:`w-full border py-1 rounded-lg appearance-none text-sm ${t.className??""} `,children:t.children});function D(t){return e("div",{...t,className:`${t.className??""} flex justify-center items-center`,role:"group",children:t.children})}const V=t=>e(j,{show:!!t.show,className:`absolute top-[3rem] p-1 px-3 font-bold font-nunito text-sm rounded border border-slate-50/50 whitespace-nowrap backdrop-blur-lg ${t.className??""}`,enter:"transition-all ease-out duration-75",enterFrom:"transform opacity-0 scale-50",enterTo:"transform opacity-100 scale-100",leave:"transition-all ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-75",children:t.content}),z=t=>e("div",{className:"flex flex-col py-1 w-full h-full justify-center font-normal",children:t.children});function ts(){const t=L(),r=c(Y),n=Ne(r),o=xe(r),a=ve(r),m=!!r.loop,i=!!r.recording,N=ue(),[M,P]=y.useState("0:0:0");y.useEffect(()=>{P(Te.Transport.position.toString())},[N]);const d=y.useMemo(()=>{let g="";return i?g="text-red-50 border-red-500":n?g="text-gray-50 border-emerald-400":o?g="text-gray-100 border-slate-300":g="text-gray-300 border-slate-500",`${g} font-light block px-2 py-1.5 w-32 text-md bg-transparent rounded-lg border appearance-none focus:border-fuchsia-500 focus:outline-none focus:ring-0 peer`},[n,o,i]),v=()=>s("div",{className:"relative",children:[e("input",{id:"timer",className:d,value:M,disabled:!0}),s("label",{htmlFor:"timer",className:"absolute text-xs duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-0 bg-gray-900 rounded px-1 left-1.5",children:["Tick: ",N]})]}),w=g=>e(_,{...g,className:`w-10 h-10 border border-slate-500 rounded-full ${g.className??""}`,children:g.children}),C="bg-slate-800",B=y.useMemo(()=>{const g=a?C:"bg-rose-700",F=n?"bg-emerald-600":C,I=i?"bg-red-700/90":C,l=m?"bg-indigo-700":C;return()=>s("div",{className:"flex space-x-1.5 text-xl",children:[e(w,{label:"Stop",className:g,onClick:()=>t(ye()),children:e(we,{})}),e(w,{label:n?"Pause":"Play",className:F,onClick:()=>t(Ce()),children:n?e(Se,{}):e(ke,{className:"pl-[2px]"})}),e(w,{label:"Record",className:I,onClick:()=>t(Me()),children:e(Pe,{})}),e(w,{label:"Loop",onClick:()=>t(Be()),className:l,children:e(Fe,{})})]})},[n,a,i,m]);return s("div",{className:"flex items-center space-x-3",children:[e(v,{}),e(B,{})]})}var pe=re.GenIcon,ss=function(r){return pe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Redo"},child:[{tag:"path",attr:{d:"M4.061,13.67A7.958,7.958,0,0,0,16.2,19.74a8.061,8.061,0,0,0,3.77-6.77.5.5,0,0,0-1,0,6.976,6.976,0,0,1-11,5.7,6.969,6.969,0,0,1,1-11.97,10.075,10.075,0,0,1,4.64-.69V7.46a.5.5,0,0,0,.81.39l2.47-1.95a.5.5,0,0,0,0-.79L14.4,3.17a.5.5,0,0,0-.8.4V5.01c-.71-.01-1.43-.03-2.13.02a7.985,7.985,0,0,0-7.41,8.64Z"}}]}]})(r)},as=function(r){return pe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Undo"},child:[{tag:"path",attr:{d:"M19.939,13.67A7.958,7.958,0,0,1,7.8,19.74a8.061,8.061,0,0,1-3.77-6.77.5.5,0,0,1,1,0,6.976,6.976,0,0,0,11,5.7,6.969,6.969,0,0,0-1-11.97,10.075,10.075,0,0,0-4.64-.69V7.46a.5.5,0,0,1-.81.39L7.109,5.9a.5.5,0,0,1,0-.79L9.6,3.17a.5.5,0,0,1,.8.4V5.01c.71-.01,1.43-.03,2.13.02a7.985,7.985,0,0,1,7.41,8.64Z"}}]}]})(r)},ns=re.GenIcon,rs=function(r){return ns({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M21.775 7.517H24v8.966h-2.225zm-8.562 0h6.506c.66 0 1.045.57 1.045 1.247v6.607c0 .84-.35 1.112-1.112 1.112h-6.439v-5.696h2.225v3.505h3.135V9.54h-5.36zm-3.235 0h2.19v8.966h-2.19zM0 7.517h7.854c.66 0 1.045.57 1.045 1.247v7.72H6.708V9.774H5.427v6.708H3.438V9.775H2.191v6.708H0Z"}}]})(r)};function ls(){const t=L(),r=Ae.useNavigate(),n=c(h=>h.arrangement.past.length),o=c(h=>h.arrangement.future.length),{downloading:a}=c(Y),m=ue({offline:!0}),i=c(Ie),N=c(Le),M=c(J),P=q(M,"file"),d=()=>e(_,{className:`p-1 ${n?"active:bg-sky-500":""}`,onClick:()=>n&&t(zt()),disabled:!n,disabledClass:"text-white/50 cursor-default",label:"undo",children:e(as,{className:"text-3xl"})}),v=()=>e(_,{className:`p-1 ${o?"active:bg-sky-500":""}`,onClick:()=>o&&t(Zt()),disabled:!o,disabledClass:"text-white/50 cursor-default",label:"redo",children:e(ss,{className:"text-3xl"})}),w=()=>s(T,{className:"px-2 h-8 hover:bg-sky-600 cursor-pointer",onClick:()=>t(He()),children:[e(k,{children:"Save to HAM"}),e(Ve,{className:"text-2xl"})]}),C=()=>s(T,{className:"px-2 h-8 hover:bg-sky-600 cursor-pointer",onClick:()=>t(Re()),children:[e(k,{children:"Load from HAM"}),e(Ue,{className:"text-2xl"})]}),B=y.useMemo(()=>{const h=a?Ee(m,0,i):0,b=h.toFixed(0),E=h===100,R=()=>s(j,{show:a,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",className:`text-xs w-32 absolute flex flex-col top-0 -right-36 p-2 border rounded bg-slate-800 ${E?"border-slate-400":"border-slate-500"}`,children:[e("div",{className:"h-1 self-start mb-1 w-full rounded bg-emerald-400 transition-all duration-300",style:{width:`${b}%`}}),s("span",{className:`${E?"text-emerald-400":"text-white/50"}`,children:[E?"Exporting...":"Rendering..."," ",b,"%"]}),e("button",{className:"self-start mt-2 text-center border border-slate-500 bg-slate-800 p-1 px-2 rounded",onClick:()=>t(ee()),children:"Cancel"})]});return()=>s(T,{className:"h-8 hover:bg-sky-600 cursor-pointer",onClick:a?()=>t(ee()):()=>t(Oe()),children:[e(k,{className:"",children:"Export to WAV"}),s("div",{className:"relative flex flex-col text-2xl",children:[e($e,{className:"text-2xl"}),e(R,{})]})]})},[a,m,i]),g=()=>s(T,{className:"h-8 hover:bg-sky-600 cursor-pointer",onClick:()=>t(Ke()),children:[e(k,{children:"Export to MIDI"}),e(rs,{className:"text-2xl"})]}),F=()=>s(T,{className:"h-8 hover:bg-sky-600 cursor-pointer",onClick:()=>r("/projects"),children:[e(k,{children:"View Projects"}),e(Ge,{className:"text-2xl"})]}),I=()=>{const h=b=>e(j,{as:y.Fragment,show:b.open,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:s(Z.Items,{className:"absolute flex flex-col items-center -top-8 -right-52 -mr-5 px-2 py-2 bg-slate-800 border border-slate-400 text-xs rounded",children:[e("div",{className:"w-full text-center pb-1 mb-1 font-bold border-b border-b-slate-500/50",children:"Clear Project?"}),e("span",{className:"text-xs px-1 mb-2 text-slate-400",children:"You will lose all unsaved changes."}),s("div",{className:"flex w-full justify-center items-center space-x-2",children:[e("button",{className:"w-1/2 px-2 py-1 rounded border border-red-500 hover:text-red-500 hover:drop-shadow cursor-pointer",onClick:()=>t(ze()),children:"Yes"}),e("button",{className:"w-1/2 px-2 py-1 rounded border border-slate-500 hover:text-slate-500 hover:drop-shadow cursor-pointer",onClick:b.close,children:"No"})]})]})});return e(T,{className:"h-8 hover:bg-sky-600 cursor-pointer",children:e(Z,{as:"div",className:"w-full relative",children:({open:b,close:E})=>s(H,{children:[s(Z.Button,{className:"w-full inline-flex justify-between items-center",children:[e(k,{children:"Clear Project"}),e(_e,{className:"text-2xl"})]}),e(h,{open:b,close:E})]})})})},l=()=>e(O,{className:"w-full focus:bg-sky-700/80 py-2 mb-2",type:"text",placeholder:"New Project",value:N.name,onChange:h=>t(We(h.target.value)),onKeyDown:G});return s("div",{className:"flex items-center",children:[e(()=>e(De,{className:`text-2xl select-none cursor-pointer mr-1 ${P?"text-sky-500":"text-slate-300"}`,onClick:()=>t(je("file"))}),{}),(()=>e(V,{className:"mt-2 bg-sky-800/75 shadow-xl",show:!!P,content:s(z,{children:[l(),e(w,{}),e(C,{}),e(B,{}),e(g,{}),e(F,{}),e(I,{})]})}))(),e(d,{}),e(v,{})]})}function os(){const t=L(),r=c(J),n=$(Qe),o=$(Xe),a=c(le),m=q(r,"patterns"),i=l=>{t(Q({clip:{patternId:l}}))};y.useEffect(()=>{var l;a||i((l=n[0])==null?void 0:l.id)},[a,n]);const N={...Ye,"Custom Patterns":o},M=y.useCallback(l=>{const f=(a==null?void 0:a.id)===l.id,S=f?"font-semibold":"font-normal",h=b=>f&&!b?"text-emerald-500":"text-white";return e(K.Option,{className:({active:b})=>`${b?"bg-emerald-500 text-white":""} text-white cursor-default select-none font-light relative py-1.5 pl-4 pr-8`,value:l.id,children:({active:b})=>s("div",{className:h(b),children:[e("span",{className:`block truncate ${S}`,children:l.name}),f?e("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 text-xl",children:e(Ze,{})}):null]})},l.id)},[a]),P=y.useCallback(l=>{const b=`${["Basic Chords","Basic Melodies","Straight Durations","Simple Rhythms"].includes(l)?"pt-0.5":"pt-0"} group relative h-full bg-slate-300/50`,u=`px-3 py-1.5 text-sm font-light backdrop-blur bg-slate-800 ${a&&d(a,l)?"text-emerald-400":"text-white"} group-hover:bg-emerald-600 group-hover:text-white`;return s("div",{className:b,children:[e("div",{className:u,children:l}),e("div",{className:"font-nunito bg-slate-800 border border-white/50 rounded top-0 right-0 translate-x-[100%] absolute hidden group-hover:block",children:e("div",{className:"h-full flex flex-col",children:N[l].map(A=>M(A))})})]},l)},[a]),d=(l,f)=>N[f].some(S=>S.id===l.id),v=()=>{const l=a!=null&&a.id?"opacity-100":"opacity-75",f=a!=null&&a.id?a.name:"No Pattern",S=`block w-full truncate px-1.5 text-[14px] text-gray-200 font-light whitespace-nowrap ${l}`;return e("span",{className:S,children:f})},w=()=>e(K.Button,{className:"select-none relative w-full h-10 items-center flex cursor-pointer rounded-md bg-gray-900 text-white text-left shadow-md focus:outline-none",onMouseUp:Je,children:e(v,{})}),C=l=>e(j,{show:l.open,appear:!0,enter:"transition-all ease-out duration-75",enterFrom:"transform opacity-0 scale-90",enterTo:"transform opacity-100 scale-100",leave:"transition-all ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-90",children:e(K.Options,{className:"font-nunito absolute z-10 w-full py-1 bg-slate-800 border border-white/50 text-base rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:qe.map(P)})});return s("div",{className:`w-40 z-[80] relative flex flex-col rounded-md select-none border rounded-b-md ${m?"border-green-400 ring-1 ring-green-400":"border-slate-400/80"}`,children:[e(()=>e("span",{className:"absolute text-xs text-emerald-500 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-0 bg-gray-900 rounded px-1 left-1",children:"Selected Pattern"}),{}),(()=>e(K,{value:(a==null?void 0:a.id)??"",onChange:i,children:({open:l})=>s("div",{className:"relative",children:[e(w,{}),C({open:l})]})}))()]})}const cs=()=>{const t=L(),r=c(W),n=et(r),o=c(le),a=o==null?void 0:o.name;return s("div",{className:"relative",id:"add-pattern-button",children:[e(()=>e(U,{label:"Add Pattern Clip",className:n?"bg-cyan-700 ring-2 ring-offset-2 ring-cyan-600/80 ring-offset-black":"bg-cyan-700/80",onClick:()=>t(Qt()),children:e(tt,{className:"p-0.5"})}),{}),(()=>o?e(V,{className:"-translate-x-1/2 left-8 bg-cyan-700/80 px-2 backdrop-blur",show:!!n,content:`Adding ${a}`}):null)()]})},is=()=>{const t=L(),r=c(W),n=st(r),o=c(at),{offsets:a,duration:m}=o,i=$(oe),N=c(ce),M=c(ie),P=(i==null?void 0:i.type)==="scaleTrack",d=$(u=>nt(u,i==null?void 0:i.id)),v=P?d.slice(0,-1):d,w=v.map(u=>X(u,M)),C=rt(a),B={...v.reduce((u,x)=>({...u,[x.id]:(a==null?void 0:a[x.id])||0}),{})},F=v.map(u=>{const x=X(u,M,N);return lt(x,C)}).map((u,x)=>{const A=v[x].name;return A!=null&&A.length?A:de(u||w[x])}),I=(u,x)=>{t(Q({transposition:{offsets:{...a,[u]:x}}}))},l=u=>{const x=isNaN((a==null?void 0:a[u])||NaN)?"":a==null?void 0:a[u];return e(O,{value:x,onChange:A=>I(u,parseInt(A.target.value)),type:"text",placeholder:"0",className:"focus:bg-fuchsia-600 h-7 ml-4 w-16",onKeyDown:G})},f=()=>s(T,{children:[e(k,{className:"w-32",children:"Chromatic Offset:"}),l("_chromatic")]}),S=()=>s(T,{children:[e(k,{className:"w-32",children:"Chordal Offset:"}),l("_self")]}),h=()=>v.map(({id:u},x)=>s(T,{children:[s(k,{className:"w-32",children:[s("span",{className:"text-gray-300",children:["(",x+1,")"]})," ",F[x],":"," "]}),l(u)]},`scalar-offset-${u}`)),b=()=>s(T,{children:[e(k,{className:"w-32",children:"Duration (Ticks):"}),e(O,{value:m,onChange:u=>t(Q({transposition:{duration:u.target.valueAsNumber}})),type:"number",placeholder:(1/0).toLocaleString(),className:"focus:bg-fuchsia-600 h-7 ml-4 w-16",onKeyDown:G})]});return s("div",{className:"flex flex-col relative",children:[e(()=>e(U,{label:"Transpose Clip",onClick:()=>t(Xt()),className:`bg-transposition ring-2 ring-offset-2 ${n?"ring-transposition/80 ring-offset-black":"ring-transparent ring-offset-transparent"}`,children:e(ot,{className:"-rotate-90 p-0.5"})}),{}),(()=>e(V,{className:"-left-[6rem] bg-fuchsia-600 min-w-[15rem] px-3",show:!!n,content:s(z,{children:[s("div",{className:"pb-2 mb-2 w-full text-center font-bold border-b",children:["Transposing by ",ct({...a,...B})]}),s("div",{className:"w-full h-full py-2 space-y-2",children:[f(),h(),S(),b()]})]})}))()]})},ds=()=>{const t=L(),r=c(ie),n=c(ce);c(it);const o=c(oe),a=c(h=>dt(h,o==null?void 0:o.id)),m=X(a,r,n);de(m);const N=!!$(ut).length,M=c(ht),P=M.mode,d=M.enabled,v=P==="numerical",w=()=>s(H,{children:[e("li",{className:"mx-auto mb-2 font-extrabold",children:"Numerical Shortcuts:"}),s("li",{children:[e("b",{children:"Hold Q:"})," ",e("span",{children:"Offset N"})]}),s("li",{children:[e("b",{children:"Hold W:"})," ",e("span",{children:"Offset T#1"})]}),s("li",{children:[e("b",{children:"Hold S:"})," ",e("span",{children:"Offset T#2"})]}),s("li",{children:[e("b",{children:"Hold X:"})," ",e("span",{children:"Offset T#3"})]}),s("li",{children:[e("b",{children:"Hold E:"})," ",e("span",{children:"Offset t"})]}),s("li",{children:[e("b",{children:"Hold Shift:"})," ",e("span",{children:"Add Octave"})]}),s("li",{children:[e("b",{children:"Hold `:"})," ",e("span",{children:"Use Negative"})]}),s("li",{children:[e("b",{children:"Press 1-9:"})," ",e("span",{children:"Offset by 1-9"})]}),s("li",{children:[e("b",{children:"Press -:"}),e("span",{children:"Offset by 10"})]}),s("li",{children:[e("b",{children:"Press =:"})," ",e("span",{children:"Offset by 11"})]})]}),C=()=>s(H,{children:[e("li",{className:"mx-auto mb-2 font-extrabold",children:"Alphabetical Shortcuts:"}),s("li",{children:[e("b",{children:"Press Q-T:"})," ",e("span",{children:"N-5 to N-1"})]}),s("li",{children:[e("b",{children:"Press Y:"})," ",e("span",{children:"N = 0"})]}),s("li",{children:[s("b",{children:["Press U-","[",":"]})," ",e("span",{children:"N+1 to N+5"})]}),s("li",{children:[e("b",{children:"Press A-G:"})," ",e("span",{children:"T-5 to T-1"})]}),s("li",{children:[e("b",{children:"Press H:"})," ",e("span",{children:"T = 0"})]}),s("li",{children:[s("b",{children:["Press J-","'",":"]})," ",e("span",{children:"N+1 to N+5"})]}),s("li",{children:[e("b",{children:"Press Z-B:"})," ",e("span",{children:"t-5 to t-1"})]}),s("li",{children:[e("b",{children:"Press N:"})," ",e("span",{children:"t = 0"})]}),s("li",{children:[s("b",{children:["Press M-","/",":"]})," ",e("span",{children:"t+1 to t+4"})]})]}),B=()=>e("ul",{className:"flex flex-col [&>li>b]:font-extrabold [&>li>span]:float-right absolute inset-0 text-xs w-44 h-fit p-2 -left-16 top-8 bg-fuchsia-600/90 backdrop-blur border-2 border-slate-300 rounded-lg transition-all transform -translate-y-2 pointer-events-none peer-hover:translate-y-0 opacity-0 peer-hover:scale-y-100 peer-hover:opacity-100 duration-300",children:v?e(w,{}):e(C,{})}),g=()=>{const h=`peer text-xl ${d?"hover:text-rose-200":""}`;return s("div",{className:`relative ${d?"cursor-pointer":""}`,onClick:()=>t(pt()),children:[v?e(mt,{className:h}):e(gt,{className:h}),d&&e(B,{})]})},F=()=>e(bt,{className:`cursor-pointer text-xl ${d?"text-slate-200 hover:text-pink-300":"pointer-events-none text-slate-300"}`,onClick:()=>t(te())}),I=()=>s("div",{className:"w-full flex items-center justify-center space-x-2",children:[e("span",{className:"font-bold",children:"Live Transposition"}),e(g,{}),e(F,{})]}),l=d?"":"cursor-pointer",f=d?"bg-fuchsia-500/90 border-fuchsia-200/80 text-white":"bg-slate-500/50 border-slate-300 text-slate-300 opacity-75 hover:opacity-100",S=()=>d?null:t(te());return e(j,{show:N,enter:"transition-all duration-300",enterFrom:"opacity-0 scale-0",enterTo:"opacity-100 scale-100",leave:"transition-all duration-300",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-0",as:"div",className:`flex h-9 items-center font-nunito font-light text-sm rounded-lg px-2 ${f} ${l} border-2 transition-all duration-150 select-none`,onClick:S,children:e(I,{})})},us=()=>{const t=L(),r=c(J),n=q(r,"patterns");return e("div",{className:"relative",id:"pattern-editor-button",children:e(()=>e(U,{className:n?"bg-green-500 ring-2 ring-offset-2 ring-green-500/80 ring-offset-black":"bg-green-500/80",onClick:()=>t(n?ft():Nt({id:"patterns"})),children:e(xt,{className:"p-[3px]"})}),{})})},hs=()=>{const t=L(),r=c(W),n=vt(r);return s("div",{className:"relative",children:[e(()=>e(U,{label:"Slice Track Media",className:n?"bg-slate-600 ring-2 ring-offset-2 ring-slate-500/80 ring-offset-black":"bg-slate-600/80",onClick:()=>t(Yt()),children:e(Tt,{})}),{}),(()=>e(V,{content:"Slicing Track Media",className:"left-[-3.2rem] bg-slate-600/80 px-2 backdrop-blur",show:!!n}))()]})},ps=()=>{const t=L(),r=c(W),n=yt(r),o=$(wt);$(Ct);const[a,m]=y.useState(""),i=()=>s(T,{children:[e(k,{className:"mr-4",children:"Name:"}),e(O,{className:"border-slate-400 h-8 w-24 focus:border-slate-200 focus:bg-purple-800/80",placeholder:"New Pattern",value:o.length?a:"N/A",disabled:!o.length,onChange:d=>m(d.target.value)})]}),N=()=>{const d=!o.length;return e(T,{className:"pt-2",children:e(he,{className:`${d?"opacity-50 cursor-default":"opacity-100 cursor-pointer animate-pulse bg-purple-600"}`,disabled:d,onClick:()=>!d&&t(qt({name:a})),children:d?"Select 1+ Clips to Merge":"Merge Selected Media"})})};return s("div",{className:"flex flex-col relative h-full",children:[e(()=>e(U,{label:"Merge Pattern Clips",onClick:()=>t(Jt()),className:`${n?"bg-purple-700 ring-2 ring-offset-2 ring-purple-700/80 ring-offset-black":"bg-purple-700/80"}`,children:e(St,{})}),{}),(()=>e(V,{className:"left-[-6rem] bg-purple-700 min-w-[15rem]",show:!!n,content:s(z,{children:[e("div",{className:"pb-2 mb-2 w-full text-center font-bold border-b",children:"Merging Track Media"}),s("div",{className:"w-full h-full p-2 space-y-1",children:[i(),e(N,{})]})]})}))()]})},U=t=>e(_,{...t,className:`border border-slate-400/80 rounded-full flex flex-col justify-center items-center w-9 h-9 text-2xl whitespace-nowrap ${t.className??""}`,children:t.children});function ms(){return s(H,{children:[s("div",{className:"flex items-center space-x-2",children:[e(us,{}),e(cs,{}),e(is,{}),e(hs,{}),e(ps,{})]}),e("div",{className:"ml-3",children:e(ds,{})})]})}function gs(){const t=L(),{bpm:r,timeSignature:n,volume:o,mute:a}=c(Y),m=c(kt),[i,N]=y.useState(!1);Mt("meta+,",()=>N(p=>!p),{splitKey:";"});const P=()=>e(Pt,{className:`text-2xl cursor-pointer mr-2 ${i?"text-slate-500 drop-shadow-xl rounded-full ring-2 ring-offset-4 ring-slate-500 ring-offset-gray-900":""}`,onClick:()=>N(!i)}),[d,v]=y.useState(r),w=p=>{p.key==="Enter"&&p.currentTarget.value&&t(Lt(p.currentTarget.valueAsNumber))},C=()=>s(T,{children:[e(k,{className:"w-32 font-light after:[`s`]",children:"Tempo (BPM):"}),e(O,{className:"focus:bg-slate-900/25 w-[2rem] h-7",type:"number",placeholder:Bt.toString(),value:d,onChange:p=>v(p.target.valueAsNumber),onKeyDown:w})]}),[B,g]=y.useState(n?n[0]:16),F=16,I=p=>{p.key==="Enter"&&!isNaN(B)&&!isNaN(F)&&t(Et([B,F]))},l=()=>s(T,{children:[e(k,{className:"w-32 font-light after:[`s`]",children:"16ths / Measure:"}),e(O,{className:"focus:bg-slate-900/25 w-[2rem] h-7",type:"number",placeholder:"16",value:B,onChange:p=>g(p.target.valueAsNumber),onKeyDown:I})]}),[f,S]=y.useState(m),h=p=>S(be=>({...be,width:p??se.width})),b=p=>{p.key==="Enter"&&!isNaN(f.width)&&(t(Ot(f.width)),S({...m,width:$t.clamp(f.width,Dt,jt)}))},E=()=>s(T,{children:[e(k,{className:"w-32 font-light",children:"Cell Width:"}),e(O,{className:"focus:bg-slate-900/25 w-[2rem] h-7",type:"number",placeholder:se.width.toString(),value:f.width,onChange:p=>h(p.target.valueAsNumber),onKeyDown:b})]}),R=()=>e(T,{className:"pt-2",children:e(he,{className:"hover:bg-slate-600/50 active:bg-slate-800/50 w-12",onClick:()=>Ft(Ht),children:"Open Shortcuts Menu"})}),u=()=>s(z,{children:[e("div",{className:"pb-2 mb-1 w-full text-center font-bold border-b",children:"Project Settings"}),s("div",{className:"w-full h-full py-2 space-y-2",children:[C(),l(),E(),e(R,{})]})]}),[x,A]=y.useState(!1),me=()=>{const p=a?e(Vt,{}):o>-20?e(Rt,{}):o>-40?e(Ut,{}):e(Kt,{});return s("div",{className:"mr-2 cursor-pointer relative text-3xl",onClick:()=>t(ae()),children:[p,x?s("label",{className:"mt-1.5 text-xs select-none absolute bg-slate-800/80 backdrop-blur p-1 px-2 rounded border border-slate-500",children:[o,"dB"]}):null]})},ge=()=>e("input",{className:"w-24 accent-white caret-slate-50 mr-4",type:"range",value:a?ne:o,min:ne,max:At,onChange:p=>t(It(parseInt(p.target.value))),onMouseDown:()=>{A(!0),a&&t(ae())},onMouseUp:()=>A(!1)});return s(H,{children:[(()=>s(H,{children:[me(),ge()]}))(),s("div",{className:"flex items-center",children:[e(P,{}),e(V,{className:"-left-[1rem] w-56 bg-slate-700/90 backdrop-blur",content:u,show:i})]})]})}function vs(){const[t,r]=y.useState(!0);return Gt.useHotkeys("meta+shift+f",()=>r(!t),[t]),s(j,{show:t,enter:"transition-opacity",enterFrom:"opacity-0",enterTo:"opacity-100 scale-100",leave:"transition-opacity",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0",as:"nav",style:{height:_t},className:"relative bg-gray-900 border-b-0.5 border-b-slate-700 shadow-xl py-2 text-slate-50 flex flex-nowrap flex-shrink-0 items-center z-30",children:[e(D,{className:"flex-shrink-0 ml-3",children:e(es,{})}),e(D,{className:"ml-4",children:e(ls,{})}),e(D,{className:"ml-3",children:e(ts,{})}),e(D,{className:"ml-4",children:e(os,{})}),e(D,{className:"ml-3",children:e(ms,{})}),s(D,{className:"relative ml-auto mr-5 hidden md:flex",children:[e(gs,{}),e(Wt,{})]})]})}export{vs as default};
